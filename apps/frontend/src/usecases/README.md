# ???????

????????????????API??????????????????????????????

## ??

???????????????????

- **??????API?????**: REST API??HTTP?????
- **???????**: API??????????????????
- **?????????**: API??????????
- **??????????????**: API???????????????

## ????????

```
usecases/
??? AutocompleteUsecase.ts  # ???????????????
??? DirectionsUsecase.ts    # ??????????
??? GeocodeUsecase.ts       # ??????????????
??? README.md
```

## ???????

### ????????????

????????**React Hooks??????????**????????????  
?????????????????

1. **React??????**: ????React???????????????
2. **???????**: `use`????React???????????
3. **???**: ??????React Query?SWR??????async/await?????

### ????????

```typescript
// ? ???: useXxx ?????????
const useGeocode = () => { ... }

// ? ???: XxxUsecase.method() ????????
const GeocodeUsecase = {
  geocode: async (params) => { ... }
}
```

## ????

### 1. ????????

?????????????

```typescript
import { GeocodeUsecase } from '@/usecases/GeocodeUsecase';

// ??????
const location = await GeocodeUsecase.geocode({
  address: '?????'
});
// => { lat: 35.6586, lng: 139.7454 }

// ?????React Query?????????
const mutation = useMutation({
  mutationFn: (params) => GeocodeUsecase.geocode(params)
});
```

### 2. ?????????

??????????????????????

```typescript
import { AutocompleteUsecase } from '@/usecases/AutocompleteUsecase';

// ??????
const suggestions = await AutocompleteUsecase.fetchSuggestions({
  query: '??',
  proximity: currentLocation,  // ?????: ????
  limit: 5                      // ?????: ?????
});

// ?????React Query?????????
const query = useQuery({
  queryKey: ['autocomplete', searchQuery],
  queryFn: () => AutocompleteUsecase.fetchSuggestions({ query: searchQuery })
});
```

### 3. ????

??????????????????

```typescript
import { DirectionsUsecase } from '@/usecases/DirectionsUsecase';

// ??????
const route = await DirectionsUsecase.getRoute({
  origin: { lat: 35.6586, lng: 139.7454 },
  destination: { lat: 35.6812, lng: 139.7671 },
  mode: 'driving'  // ?????: ????
});

// ?????React Query?????????
const mutation = useMutation({
  mutationFn: (params) => DirectionsUsecase.getRoute(params)
});
```

## ????

### ?????

- **???????** (`usecases/`): ??????API???????????
- **????** (`hooks/`, `pages/`): UI??????????????????React Hooks?
- **????????** (`components/`): UI????

### ??????

```
Component
    ?
Hook (use***) ? React Query/State??
    ?
Usecase (***Usecase.method) ? ?????
    ?
Backend API
```

### ??

1. **???????**: ???????????????
2. **????**: React???????????????
3. **???**: API???????????
4. **????**: TypeScript??????????
5. **?????????**: `use`??????????????

## ????????

????????????????????????????????

```typescript
// hooks/useRouteSearch.ts
import { GeocodeUsecase } from '@/usecases/GeocodeUsecase';
import { DirectionsUsecase } from '@/usecases/DirectionsUsecase';

export function useRouteSearch() {
  const [isLoading, setIsLoading] = useState(false);
  
  const searchRoute = async (destination: string) => {
    setIsLoading(true);
    try {
      // ?????????????
      const coords = await GeocodeUsecase.geocode({ address: destination });
      const route = await DirectionsUsecase.getRoute({ origin, destination: coords });
      return route;
    } finally {
      setIsLoading(false);
    }
  };
  
  return { searchRoute, isLoading };
}
```

## ??????API??

????????????????????API???????

- `GET /api/places/autocomplete` - ?????????
- `GET /api/places/geocode` - ????????  
- `GET /api/places/directions` - ????

??? `/workspace/docs/backend-architecture.md` ??????????
