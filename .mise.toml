[tools]
bun = "1.1.0"

[tasks.install]
description = "Install workspace dependencies"
run = "bun install"

[tasks.dev]
description = "Start both frontend and backend dev servers"
run = "bun run --cwd apps/backend dev & bun run --cwd apps/frontend dev"

[tasks.build]
description = "Build frontend and backend"
run = [
  "bun run --cwd apps/frontend build",
  "bun run --cwd apps/backend build"
]

[tasks.lint]
description = "Run Biome lint across the monorepo"
run = "bunx biome lint"

[tasks."lint:fix"]
description = "Apply safe Biome lint fixes"
run = "bunx biome lint --write"

[tasks.format]
description = "Format code with Biome (includes organize imports)"
run = "bunx biome check --write"

[tasks."format:check"]
description = "Check formatting without writing"
run = "bunx biome format --check"

[tasks.check]
description = "Run Biome check (lint + format)"
run = "bunx biome check"

[tasks."type-check"]
description = "Run TypeScript type checking for frontend and backend"
run = [
  "bunx tsc --noEmit --project apps/backend/tsconfig.json",
  "bunx tsc --noEmit --project apps/frontend/tsconfig.json"
]

[tasks.test]
description = "Run all tests (frontend and backend)"
run = [
  "bun run --cwd apps/backend test",
  "bun run --cwd apps/frontend test"
]

[tasks.frontend_test]
description = "Run tests for frontend"
run = "bun run --cwd apps/frontend test"
