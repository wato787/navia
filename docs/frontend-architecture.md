# ??????????????

## ??

????????????????????????????????????????????????

## ????????

```
src/
??? usecases/           # ??????????????API?????
?   ??? AutocompleteUsecase.ts  # ?????????
?   ??? DirectionsUsecase.ts    # ????
?   ??? GeocodeUsecase.ts       # ????????
?   ??? README.md
??? components/         # React????????UI???
??? hooks/             # ????????UI?????
??? pages/             # ????????????????????
??? lib/               # ?????????
??? types/             # ???
```

## ??????????

### 1. ??????? (`usecases/`)

**??**: ??????API???????????

- API????????
- ?????????
- ?????????
- **??**: React Hooks???????????????

**????**:
- ? `XxxUsecase.method()` - ???
- ? `useXxx()` - ????`use`????React Hooks???

**?**:
```typescript
// src/usecases/GeocodeUsecase.ts
export const GeocodeUsecase = {
  async geocode(params: GeocodeParams): Promise<Location> {
    // ??????API?????
    const response = await fetch(`/api/places/geocode?address=${params.address}`);
    return await response.json();
  }
};
```

### 2. ???? (`hooks/`, `pages/`)

**??**: UI??????????????????React Hooks?

- ?????????????????????
- UI???????useState?React Query??
- ????????????
- debounce???UI???

**????**:
- ? `useXxx()` - React Hooks?????

**?**:
```typescript
// src/pages/useRouteSearch.ts
import { GeocodeUsecase } from '@/usecases/GeocodeUsecase';
import { DirectionsUsecase } from '@/usecases/DirectionsUsecase';

export function useRouteSearch(mapRef, currentLocation) {
  const [isLoading, setIsLoading] = useState(false);
  
  const searchRoute = async (destination: string) => {
    setIsLoading(true);
    try {
      // 1. ??????????????????????
      const coords = await GeocodeUsecase.geocode({ address: destination });
      // 2. ??????????????????
      const route = await DirectionsUsecase.getRoute({ 
        origin: currentLocation, 
        destination: coords 
      });
      // 3. ?????
      await displayRoute(route);
    } finally {
      setIsLoading(false);
    }
  };
  
  return { searchRoute, isLoading };
}
```

### 3. ???????? (`components/`)

**??**: UI????

- ?????????
- ???????????????????
- ??????
- ?????????????

**?**:
```typescript
// src/components/SearchRoute/SearchRoute.tsx
export function SearchRoute({ onSearch, currentLocation }) {
  const [value, setValue] = useState("");
  
  return (
    <SearchBar value={value} onChange={setValue} onSearch={onSearch}>
      <SuggestionsList query={value} currentLocation={currentLocation} />
    </SearchBar>
  );
}
```

## ??????

```
User Action (Component)
    ?
UI Logic (Hook - use***)
    ?
Use Case (Pure Function - ***Usecase.method)
    ?
Backend API
```

???:
```
Backend API Response
    ?
Use Case (Data Transformation)
    ?
UI Logic (State Update)
    ?
Component (Re-render)
```

## ??

### 1. ???????

- ???????????????????????
- UI?????API????????????

### 2. ????

- ???????????????????????
- React??????????????????????

### 3. ???

- API??????????????????????
- ????????????????

### 4. ????

- TypeScript?????????????
- API???????????????????

### 5. ?????????

- `use`??????React Hooks?????
- ?????????????????React??????????

## ????????

### Geocode??????????

?????????????

- **????**: `src/usecases/GeocodeUsecase.ts`
- **API**: `GET /api/places/geocode`
- **????**: `useRouteSearch`

```typescript
import { GeocodeUsecase } from '@/usecases/GeocodeUsecase';

const location = await GeocodeUsecase.geocode({ address: '?????' });
```

### Autocomplete???????????

??????????????????????

- **????**: `src/usecases/AutocompleteUsecase.ts`
- **API**: `GET /api/places/autocomplete`
- **????**: `useSearchAutocomplete` ? `SuggestionsList`

```typescript
import { AutocompleteUsecase } from '@/usecases/AutocompleteUsecase';

const suggestions = await AutocompleteUsecase.fetchSuggestions({ 
  query: '??',
  limit: 5 
});
```

### Directions??????

??????????????????

- **????**: `src/usecases/DirectionsUsecase.ts`
- **API**: `GET /api/places/directions`
- **????**: `useRouteSearch`

```typescript
import { DirectionsUsecase } from '@/usecases/DirectionsUsecase';

const route = await DirectionsUsecase.getRoute({
  origin: { lat: 35.6586, lng: 139.7454 },
  destination: { lat: 35.6812, lng: 139.7671 },
  mode: 'driving'
});
```

## ??????

### ?????????????

```typescript
// 1. ???
export interface XxxParams {
  // ?????
}

interface XxxResponse {
  // ??????API??????
}

// 2. ?????????????public?
export const XxxUsecase = {
  /**
   * ???????
   * @param params ?????
   * @returns ??
   * @throws ??????
   */
  async methodName(params: XxxParams): Promise<Result> {
    // API????
    const response = await fetch(`${BACKEND_API_URL}/api/...`);
    
    // ?????????
    if (!response.ok) {
      throw new Error('...');
    }
    
    // ?????
    const data: XxxResponse = await response.json();
    return transformData(data);
  }
};
```

### ??????????

```typescript
export function useFeature() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<Error | null>(null);
  
  const doSomething = async (params) => {
    setIsLoading(true);
    setError(null);
    
    try {
      // ?????????????
      const result1 = await Usecase1.method1(params1);
      const result2 = await Usecase2.method2(params2);
      // ????????
    } catch (err) {
      setError(err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  };
  
  return { doSomething, isLoading, error };
}
```

### React Query???????

????????????????React Query??????????????

```typescript
// Mutation
const mutation = useMutation({
  mutationFn: (params) => GeocodeUsecase.geocode(params)
});

// Query
const query = useQuery({
  queryKey: ['autocomplete', searchQuery],
  queryFn: () => AutocompleteUsecase.fetchSuggestions({ query: searchQuery })
});
```

## ?????

???????????????????????????

1. **??????????**: `src/usecases/[Feature]Usecase.ts`
   - ??????????
   - `[Feature]Usecase.method()` ??

2. **???????????????**: `src/hooks/use[Feature].ts`
   - React Hooks?????
   - `use[Feature]()` ??

3. **???????????**: 
   - ?????????????????
   - ???????????

??? `src/usecases/README.md` ??????????
