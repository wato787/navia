# ????????????????

## ????????
- ?????: Bun
- ???????: Hono (????????????????????????)
- ???????????: Zod (+ @hono/zod-validator)
- ????: JSON ?????????????????

## ???????????????
```
src/index.ts       : Bun ? `serve` ?? `createApp` ?????
?? src/app/index.ts : Hono ??????????????????????
```

1. ???? (`src/config/env.ts`) ? Zod ?????`ENV` ? `isProduction` ???
2. `createApp()` ??????????
   - `trimTrailingSlash()` ? ??????????????
   - `requestId()` ? ??????????? ID ???
   - `cors()` ? `ENV.BASE_URL` ???? CORS ??
   - `prettyJSON()` ? ????? JSON ???????
   - `requestLogger` ? ???????????????
3. `registerRoutes()` ????????? API ??????????
4. `app.notFound()` ? `app.onError()` ???????????????

## ????????
- ????????? *Modular Routing* ?????`src/modules` ? API ?????
- `RouteModule` ? (`src/types/router.ts`) ? `basePath` ? `router` ?????
- `src/routes/modules.ts` ?? `apiModules` ?????????????`registerApiModules()` ???? `app.route()` ???
- ??????? `healthModule` ? `/api/health` ????????/????????

```
src/routes/index.ts
?? ??????? (`/`, `/healthz`) ? `/api` ?????????
   ?? registerApiModules() ? modules/ ???????
```

## ?????????
- `src/utils/response.ts`
  - `ok / created / accepted / noContent` ? API ???????????
  - `meta` ???????????????
- `src/plugins/validator.ts`
  - `validateJson / validateQuery / validateParams`
  - Zod ?????????? Hono ??????????????????????? `ZodError` ? throw

## ?????????
- `ApiError` (`src/errors/apiError.ts`)
  - ???????????????????????
  - Hono ? `HTTPException` ?????`throw new ApiError(...)` ???
- `handleError` (`src/errors/handleError.ts`)
  - `ApiError`, `ZodError`, `HTTPException`, ???? `Error` ?????
  - 500 ????????????????
  - ?????????????????????`requestId`?`path` ????????

## ????
- `src/lib/logger.ts`
  - `ENV.LOG_LEVEL` ????????
  - JSON ??? `level`, `message`, `timestamp`, ??????????
- `src/middleware/requestLogger.ts`
  - `try/finally` ??????????????????
  - ????? `status >=500` ? `error` ????????

## API ????
1. `src/modules/<feature>/<feature>.module.ts` ?????`Hono<AppBindings>` ????????
2. ?????? `validateJson` ???????????? `ApiError` ???
3. ????????? `ok`, `created` ?????????????
4. ????? `RouteModule` ???????????`src/modules/index.ts` ?????????
5. `src/routes/modules.ts` ? `apiModules` ????????????`basePath` ????????

## ????
```bash
bun install          # ??????????
bun run --watch src/index.ts  # ????????
```

???????:
- `GET /api/health/live` : `{ data: { status, uptime, timestamp } }`
- `GET /api/health/ready`: `{ data: { status: "ready" } }`

## ???????
- ??/??: Hono ? `middleware` ????? `src/middleware` ?????
- ?????/?????: ??????? (e.g. hono-rate-limit) ? `app.use()` ?????????
- OpenAPI ??: `@hono/swagger-ui` ????????????????????????

?????????????API ???????????????????????????????????????????????????????????????????????
