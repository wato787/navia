# ?????????????

## ??????
- ?????: Bun
- ???????: Hono (???????????)
- ???????: Zod (+ @hono/zod-validator)
- ??: JSON ???????

## ????????
```
src/index.ts       : Bun ? `serve` ? `createApp` ???
?? src/app/index.ts : Hono ????????????????????
```

1. ???? (`src/config/env.ts`) ? Zod ???? `ENV` ? `isProduction` ???
2. `createApp()` ???????
   - `trimTrailingSlash()` ???????????
   - `requestId()` ?????? ID ???
   - `cors()` ? `ENV.BASE_URL` ??? CORS ??
   - `prettyJSON()` ????? JSON ?????
   - `requestLogger` ???????????
3. `registerRoutes()` ???????? API ?????????
4. `app.notFound()` ? `app.onError()` ??????????

## ?????? (Hono ?????????)
- Hono?????? `app.route()` ???
- ??????? `src/modules/<feature>/routes.ts` ? Hono ?????????????
- `src/routes/index.ts` ????????????
- ?: `healthModule` ? `/api/health` ???????????

```
src/routes/index.ts
?? ?????????? (`/`, `/healthz`) ???
?? `/api` ???????????
   ?? modules/ ?????? app.route() ???
```

### ???????
????????????????
```
src/modules/
?? <feature>/
   ?? routes.ts    : Hono ??????? default export
   ?? index.ts     : routes.ts ????????
```

## ???????
- `src/utils/response.ts`
  - `ok / created / accepted / noContent` ? API ???????
  - `meta` ??????????????????
- `src/plugins/validator.ts`
  - `validateJson / validateQuery / validateParams`
  - Zod ???????? Hono ???????????? `ZodError` ? throw

## ????
- `src/lib/logger.ts`
  - `ENV.LOG_LEVEL` ??????
  - JSON ??? `level`, `message`, `timestamp`, ??????????
- `src/middleware/requestLogger.ts`
  - `try/finally` ??????????????
  - ???????? `status >=500` ? `error` ????????

## API ????
1. `src/modules/<feature>/routes.ts` ???? Hono ??????? export default
2. ?????? `validateJson` ????????
3. ?????? `ok`, `created` ??????????
4. `src/modules/<feature>/index.ts` ? routes.ts ????????
5. `src/routes/index.ts` ? `api.route()` ???

## ??
```bash
bun install          # ?????????????
bun run dev          # ?????????????????
```

????????:
- `GET /api/health/live` : `{ data: { status, uptime, timestamp } }`
- `GET /api/health/ready`: `{ data: { status: "ready" } }`

## ??????
- ??/??: Hono ? `middleware` ??? `src/middleware` ???
- ?????/?????: ??????? (e.g. hono-rate-limit) ? `app.use()` ?????
- OpenAPI ??: `@hono/zod-openapi` ???????????????????????

?????????????? API ????????????????????????????????????????????????
